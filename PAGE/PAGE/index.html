<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<link rel="stylesheet" href="./css/style.css">
<script src="./js/fontsize.js"></script>
<script src="./js/vue.min.js"></script>
<script>
    // ----------完全加载前的loading页面----------
    //监听加载状态改变
    document.onreadystatechange = completeLoading;

    //加载状态为complete时移除loading效果
    function completeLoading() {
        if (document.readyState == "complete") {
            var loadingMask = document.getElementById('loadingDiv');
            loadingMask.parentNode.removeChild(loadingMask);
        }
    }
</script>

<body>
    <div id=loadingDiv
        style="position: fixed;width:100vw;height: 100vh; background:#E9EDF0;z-index:999;display: flex;flex-direction: column;justify-content: center;align-items: center;">
        <img src="./img/loading.gif" style="width:50px;height:50px;">
        <span>加载中...</span>
    </div>
    <div id="all">
        <div class="box" id='box'>
            <div class="topbox">
                <img src="./img/invite/xyicon170.png" class="border-icon" />
                <div class="border-right">
                    <div class="border-text">线上购买享优惠</div>
                    <div class="border-text">线下乐购商家扫码支付最低9.7折起</div>
                </div>
            </div>
            <div class="hongbaobox">
                <div class="jine">
                    <span style="font-size:.60rem">￥</span><span style="font-size:1.20rem">2000</span>
                </div>
                <div class="redbagtext">新人专享券</div>
                <div class="btn" catchtap="useItRightNow" onclick="showLoginBox(true)">立即使用</div>
            </div>

        </div>
        <div class="infobigbox" onclick="showLoginBox(false)" id="infobigbox" style="display: none;"></div>
        <div class="infobox" id="infobox" style="display: none;">
            <div class="info-top">
                <img src="./img/invite/xyicon100.png" class="infobox-icon" alt="">
                <div class="infobox-about">新银乐购 惊喜不断 优惠不停</div>
            </div>
            <div class="changeinfo" id="phoneInput">
                <div class="label">你的手机号码</div>
                <div><input type="number" maxlength="11" class="input" placeholder="请输入手机号"></div>
                <div><input type="password" id="password"  class="input" placeholder="设置新银乐购账号密码"></div>
                <div class="nextbtn" onclick=" showGetPhoneInput(false);showCodeInput(true)">下一步</div>
            </div>
            <div class="changeinfo" id="codeInput" style="display: none;">
                <div class="label">手机验证码</div>
                <div class="codebox">
                    <input type="number" maxlength="11" class="input" v-model="phone" placeholder="输入验证码">
                    <div class="getcode" v-if="canclick">点击获取</div>
                    <div class="getcode disable" v-if="!canclick">{{time}}s</div>
                </div>
                <div class="nextbtn" onclick="">下一步</div>
            </div>
        </div>
        <div class="sucess" id="sucess" style="display: none;">
            <div class="sucess-top"><img src="./img/close.png" alt="" class="close" onclick="showSucess(false)"></div>
            <div style="text-align: center;"><img src="./img/sucess.png" class="sucess-icon" alt=""></div>
            <div class="sucess-title">恭喜您，注册成功</div>
            <div class="sucess-desc">恭喜您加入新银乐购, 马上开启乐购新生活</div>
            <div class="sucess-btn">立即下载体验</div>
        </div>
        <div class="sucess" id="fail" style="display: none;">
            <div class="sucess-top"><img src="./img/close.png" alt="" class="close" onclick="showFail(false)"></div>
            <div style="text-align: center;"><img src="./img/sucess.png" class="sucess-icon" alt=""></div>
            <div class="sucess-title">对不起，注册失败</div>
            <div class="sucess-desc">请重新扫码注册</div>
            <!-- <div class="sucess-btn">立即下载体验</div> -->
        </div>
    </div>
</body>
<script>
    // 登录弹窗
    function showLoginBox(show) {
        var realMoney = document.getElementById("infobigbox");
        var box = document.getElementById("infobox");
        if (show) {
            realMoney.style.display = 'block'; box.style.display = 'block';
        } else {
            realMoney.style.display = 'none'; box.style.display = 'none'
        }
    }
    // 电话
    function showGetPhoneInput(show) {
        var realMoney = document.getElementById("phoneInput");
        if (show) {
            realMoney.style.display = 'block';
        } else {
            realMoney.style.display = 'none'
        }
    }
    // 验证码
    function showCodeInput(show) {
        var realMoney = document.getElementById("codeInput");
        if (show) {
            realMoney.style.display = 'block';
        } else {
            realMoney.style.display = 'none'
        }
    }
    // 注册成功
    function showSucess(show) {
        var realMoney = document.getElementById("sucess");
        if (show) {
            realMoney.style.display = 'block';
        } else {
            realMoney.style.display = 'none'
        }
    }
    // 注册失败
    function showFail(show) {
        var realMoney = document.getElementById("fail");
        if (show) {
            realMoney.style.display = 'block';
        } else {
            realMoney.style.display = 'none'
        }
    }
</script>
<script>
    let defaulttime = 60;
    new Vue({
        el: '#all',
        data: {
            phone: '',
            code: '',
            canclick: false,
            time: 60
        },
        methods: {
            clickGetcode() {
                let time = defaulttime;
                let timer = setInterval(() => {
                    time--;
                    if (time == 0) {
                        clearInterval(timer);
                        this.setData({
                            canGetCode: true,
                            timeIntervalNum: intervalTime
                        });
                        return;
                    }
                    this.setData({
                        timeIntervalNum: time
                    })
                }, 1000)
            }
        }
    })
</script>

</html>